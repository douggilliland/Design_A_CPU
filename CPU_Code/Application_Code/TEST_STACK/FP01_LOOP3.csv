LABEL,OPCODE,REG_LABEL,OFFSET_ADDR,COMMENT,V3.0.0
WR001,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X00,MCP IODIRA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ALL_INS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR002,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X01,MCP IODIRB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_ALL_OUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR003,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X02,MCP IPOLA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_INVERT_INPUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR004,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X04,MCP GPINTENA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ENABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR005,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X05,MCP GPINTENB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DISABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR006,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X06,MCP DEFVALA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DEFVAL=0,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR007,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x08,MCP INTCONA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_COMPARE_TO_PREV_VAL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR008,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x0A,MCP IOCON REGISTER IN R1,
,LRI,0X02,0x64,MCP23017_MIRRORINT_NOTSEQ_ODRINT,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR009,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X0C,MCP GPPUA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_PULLUPS_ON,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR010,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,LRI,0X02,0X55,DEFAULT OUTPUT DATA SHOULD FLASH,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR021,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X00,MCP IODIRA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ALL_INS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR022,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X01,MCP IODIRB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_ALL_OUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR023,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X02,MCP IPOLA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_INVERT_INPUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR024,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X04,MCP GPINTENA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ENABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR025,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X05,MCP GPINTENB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DISABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR026,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X06,MCP DEFVALA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DEFVAL=0,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR027,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x08,MCP INTCONA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_COMPARE_TO_PREV_VAL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR028,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x0A,MCP IOCON REGISTER IN R1,
,LRI,0X02,0x64,MCP23017_MIRRORINT_NOTSEQ_ODRINT,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR029,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X0C,MCP GPPUA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_PULLUPS_ON,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR030,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,LRI,0X02,0XAA,DEFAULT OUTPUT DATA SHOULD FLASH,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR041,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X00,MCP IODIRA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ALL_INS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR042,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X01,MCP IODIRB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_ALL_OUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR043,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X02,MCP IPOLA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_INVERT_INPUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR044,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X04,MCP GPINTENA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ENABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR045,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X05,MCP GPINTENB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DISABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR046,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X06,MCP DEFVALA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DEFVAL=0,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR047,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x08,MCP INTCONA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_COMPARE_TO_PREV_VAL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR048,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x0A,MCP IOCON REGISTER IN R1,
,LRI,0X02,0x64,MCP23017_MIRRORINT_NOTSEQ_ODRINT,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR049,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X0C,MCP GPPUA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_PULLUPS_ON,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR050,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,LRI,0X02,0XDE,DEFAULT OUTPUT DATA SHOULD FLASH,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR061,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X00,MCP IODIRA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ALL_INS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR062,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X01,MCP IODIRB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_ALL_OUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR063,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X02,MCP IPOLA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_INVERT_INPUTS,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR064,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X04,MCP GPINTENA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_ENABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR065,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X05,MCP GPINTENB REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DISABLE_INTS_ON_CHANGE,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR066,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X06,MCP DEFVALA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_DEFVAL=0,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR067,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x08,MCP INTCONA REGISTER IN R1,
,LRI,0X02,0X00,MCP23017_COMPARE_TO_PREV_VAL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR068,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0x0A,MCP IOCON REGISTER IN R1,
,LRI,0X02,0x64,MCP23017_MIRRORINT_NOTSEQ_ODRINT,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
WR069,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X0C,MCP GPPUA REGISTER IN R1,
,LRI,0X02,0XFF,MCP23017_PULLUPS_ON,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
WR070,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,LRI,0X02,0XAD,DEFAULT OUTPUT DATA SHOULD FLASH,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
RD101,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X12,MCP GPIOA REGISTER IN R1,
,JSR,RD_I2C,,CALL MCP23017 I2C READ – RETURN IN REG R2,
,IOW,0X02,0X00,WRITE OUT TO HIGHER LEVEL,
WR101,LRI,0X00,0X48,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,IOR,0X02,0X00,READ FROM HIGHER LEVEL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
RD102,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X12,MCP GPIOA REGISTER IN R1,
,JSR,RD_I2C,,CALL MCP23017 I2C READ – RETURN IN REG R2,
,IOW,0X02,0X01,WRITE OUT TO HIGHER LEVEL,
WR102,LRI,0X00,0X4A,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,IOR,0X02,0X01,READ FROM HIGHER LEVEL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
RD103,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X12,MCP GPIOA REGISTER IN R1,
,JSR,RD_I2C,,CALL MCP23017 I2C READ – RETURN IN REG R2,
,IOW,0X02,0X02,WRITE OUT TO HIGHER LEVEL,
WR103,LRI,0X00,0X4C,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,IOR,0X02,0X02,READ FROM HIGHER LEVEL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
RD104,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X12,MCP GPIOA REGISTER IN R1,
,JSR,RD_I2C,,CALL MCP23017 I2C READ – RETURN IN REG R2,
,IOW,0X02,0X03,WRITE OUT TO HIGHER LEVEL,
WR104,LRI,0X00,0X4E,I2C SLAVE ADDRESS IN R0,
,LRI,0X01,0X15,MCP OLATA REGISTER IN R1,
,IOR,0X02,0X03,READ FROM HIGHER LEVEL,
,JSR,WR_I2C,,CALL MCP23017 I2C WRITE,
,IOW,0X09,0X06,WRITE SCAN STROBE,
,JMP,RD101,,LOOP FOREVER,
WR_I2C,IOW,0X09,0X05,ISSUE START COMMAND (0X00),
,JSR,WAIT,,,
,IOW,0X00,0X04,WRITE SLAVE ADDRESS (PASSED IN RO),
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,IOW,0X08,0X05,ISSUE IDLE COMMAND,
,JSR,WAIT,,,
,IOW,0X01,0X04,WRITE MCP REGISTER TO MCP (PASSED IN R1),
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,LRI,0X03,0X03,STOP COMMAND VALUE,
,IOW,0X03,0X05,ISSUE STOP COMMAND,
,JSR,WAIT,,,
,IOW,0X02,0X04,WRITE VALUE MCP (PASSED IN R2),
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,RTS,,,,
RD_I2C,IOW,0X09,0X05,ISSUE I2C START COMMAND,
,JSR,WAIT,,,
,IOW,0X00,0X04,WRITE I2C SLAVE ADDRESS (PASSED IN R0),
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,LRI,0X03,0X03,LOAD STOP COMMAND,
,IOW,0X03,0X05,ISSUE STOP COMMAND,
,JSR,WAIT,,,
,IOW,0X09,0X05,ISSUE START COMMAND,
,JSR,WAIT,,,
,ORI,0X00,0X01,SET I2C ADDR TO READ,
,IOW,0X00,0X04,WRITE I2C SLAVE ADDRESS (PASSED IN R0),
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,IOW,0X08,0X05,ISSUE IDLE COMMAND,
,JSR,WAIT,,,
,LRI,0X04,0X54,LOAD BOGUS WRITE,
,IOW,0X04,0X04,WRITE BOGUS TO MAKE I2C DO READ,
,JSR,POLLBS,,POLL I2C STATUS BUSY,
,IOR,0X02,0X04,READ MCP REGISTER TO REG RETURN IN R2,
,LRI,0X03,0X03,STOP COMMAND,
,IOW,0X03,0X05,ISSUE STOP COMMAND,
,JSR,WAIT,,,
,RTS,,,,
POLLBS,IOR,0X07,0X05,POLL I2C STATUS BUSY,
,ARI,0X07,0X01,MASK BUSY BIT,
,BNZ,POLLBS,,LOOP BACK IF STILL BUSY,
,RTS,,,,
WAIT,NOP,,,,
,NOP,,,,
,NOP,,,,
,NOP,,,,
,NOP,,,,
,RTS,,,,
