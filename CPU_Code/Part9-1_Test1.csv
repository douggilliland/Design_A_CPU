LABEL,OPCODE,REG_LABEL,OFFSET_ADDR,COMMENT
START,LRI,0X00,0X00,WRITE TEST NUMBER TO 7SEG
,IOW,0X00,0X02,TEST NUMBER = 0
,IOW,0X00,0X03,
,LRI,0X00,0X00,WRITE OUT ZERO FOR NO SWITCH
,IOW,0X00,0X0C,WRITE LEDS WITH ZER0S
NOSWS,IOR,0X00,0X0D,READ SWITCHES
,ARI,0X00,0XFF,LOOK AT ALL 8 SWITCHES
,BEZ,NOSWS,,NO SWITCHES ARE SET
CHKSW1,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X01,TEST SW1
,BNZ,TSTSLL,,SW1 IS ON SLL
CHKSW2,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X02,TEST SW2
,BNZ,TSTSLR,,SW2 IS ON SLR
CHKSW3,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X04,TEST SW3
,BNZ,TSTSAL,,SW3 IS ON SAL
CHKSW4,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X08,TEST SW4
,BNZ,TSTSAR,,SW4 IS ON  SAR
CHKSW5,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X10,TEST SW5
,BNZ,TSTRRL,,SW5 IS ON RRL
CHKSW6,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X20,TEST SW6
,BNZ,TSTRRR,,SW6 IS ON RRR
CHKSW7,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X40,TEST SW7
,BNZ,TSTADI,,SW7 IS ON ADI
CHKSW7,IOR,0X00,0X0D,READ SWITCHES AGAIN
,ARI,0X00,0X80,TEST SW7
,BNZ,TSTXRI,,SW7 IS ON ADI
ENDPOL,JMP,START,,NO SWITCH WAS ON
TSTSLL,LRI,0X00,0X01,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X01,TEST SHIFT LEFT
LOOPSLL,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,SLL,0X00,0X01,SHIFT LEFT
,ARI,0X00,0XFF,CHECK IF RESULT SHIFTS OUT
,BNZ,LOOPSLL,,
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X01,LOOK AT THE SWITCHES
,BEZ,START,,SWITCHES ALL OFF
,JMP,TSTSLL,,SWITCH STILL ON
TSTSLR,LRI,0X00,0X02,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X80,SHIFT LOGICAL RIGHT
,LRI,0X02,0X01,
LOOPSLR,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,SLR,0X00,0X01,SHIFT RIGHT
,SLL,0X02,0X01,SHIFT TEST BIT
,ARI,0X02,0XFF,CHECK IF RESULT SHIFTS OUT
,BNZ,LOOPSLR,,
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X02,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,TSTSLR,,SWITCH STILL ON
TSTSAL,LRI,0X00,0X03,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X01,INITIALIZE R0 TO 1
LOOPSAL,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,SAL,0X00,0X01,SHIFT LEFT
,ARI,0X00,0XFF,CHECK IF RESULT SHIFTS OUT
,BNZ,LOOPSAL,,
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X04,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,TSTSAL,,SWITCH STILL ON
TSTSAR,LRI,0X00,0X04,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X80,WRITE LEDS WITH R0
,LRI,0X02,0X01,LOOP BIT TEST
LOOPSAR,IOW,0X00,0X0C,WRITE LEDS WITH R0
,SAR,0X00,0X01,SHIFT RIGHT
,SLL,0X02,0X01,BIT TO TEST FOR LOOP
,JSR,WAIT250,,WAIT 250 MS
,ARI,0X02,0XFF,CHECK FOR 0 (LOOP DONE)
,BNZ,LOOPSAR,,MORE TO DO
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X08,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,TSTSAR,,SWITCH STILL ON
TSTRRL,LRI,0X00,0X05,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X01,TEST ROTATE LEFT
LOOPRRL,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,RRL,0X00,0X01,ROTATE REG LEFT
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X10,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,LOOPRRL,,SWITCH STILL ON
TSTRRR,LRI,0X00,0X06,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X80,TEST SHIFT LEFT
LOOPRRR,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,RRR,0X00,0X01,ROTATE REG RIGHT
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X20,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,LOOPRRR,,SWITCH STILL ON
TSTADI,LRI,0X00,0X07,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X00,
LOOPADI,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,ADI,0X00,0X01,SHOULD COUNT UP
,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X40,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,LOOPADI,,SWITCH STILL ON
TSTXRI,LRI,0X00,0X08,DISPLAY TEST NUMBER ON 7SEG
,IOW,0X00,0X02,
,LRI,0X00,0X55,
,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,XRI,0X00,0XFF,INVERT BITS
,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
,CMP,0X00,0XAA,
,BEQ,SKIPXRI,,
,LRI,0X00,0XFF,
,IOW,0X00,0X0C,WRITE LEDS WITH R0
,JSR,WAIT250,,WAIT 250 MS
SKIPXRI,IOR,0X01,0X0D,READ SWITCHES
,ARI,0X01,0X80,LOOK AT THE SWITCH
,BEZ,START,,SWITCHES ALL OFF
,JMP,TSTXRI,,
WAIT250,LRI,0x07,0XFB,250 MSEC
,IOW,0X07,0X09,WRITE MSEC COUNT
WAIT_RT,IOR,0X07,0X08,READ TIMER STATUS TO R7
,ARI,0X07,0X01,CHECK TIMER DONE
,BNZ,WAIT_RT,,WAIT UNTIL TIMER FINISHES
,RTS,,,
